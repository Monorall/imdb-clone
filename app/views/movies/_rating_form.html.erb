<%= form_with(model: [movie, movie.ratings.find_or_initialize_by(user: current_user)],
              data: { turbo_action: "replace", turbo_target: "rating_form_#{movie.id}" }) do |form| %>
  <div id="rating_form_<%= movie.id %>" class="star-rating">
    <% (1..10).reverse_each do |i| %>
      <%= form.radio_button :stars, i, class: "rating-input", "data-rating-form-target": "input", id: "rating_#{movie.id}_#{i}", "aria-label": "Rate #{i} star(s)" %>
      <%= form.label :stars, "#{i}", for: "rating_#{movie.id}_#{i}", "aria-hidden": "true" %>
    <% end %>
    <%= form.submit "Submit Rating", class: "submit-rating-button" %>
  </div>
<% end %>
